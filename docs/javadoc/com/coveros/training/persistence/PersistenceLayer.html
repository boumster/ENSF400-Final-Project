<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>PersistenceLayer (ENSF400-Final-Project 1.0.0 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: com.coveros.training.persistence, class: PersistenceLayer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.coveros.training.persistence</a></div>
<h1 title="Class PersistenceLayer" class="title">Class PersistenceLayer</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.coveros.training.persistence.PersistenceLayer</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">PersistenceLayer</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">PersistenceLayer</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#areCredentialsValid(java.lang.String,java.lang.String)" class="member-name-link">areCredentialsValid</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check whether the credentials are valid</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cleanAndMigrateDatabase()" class="member-name-link">cleanAndMigrateDatabase</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Cleans the database and runs the scripts to update it
 to the most current version.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cleanDatabase()" class="member-name-link">cleanDatabase</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Cleans the database and runs the scripts to update it
 to the most current version.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#createEmpty()" class="member-name-link">createEmpty</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createLoan(com.coveros.training.library.domainobjects.Book,com.coveros.training.library.domainobjects.Borrower,java.sql.Date)" class="member-name-link">createLoan</a><wbr>(<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&nbsp;book,
 <a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&nbsp;borrower,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Date.html" title="class or interface in java.sql" class="external-link">Date</a>&nbsp;borrowDate)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a new loan of a book in the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteBook(long)" class="member-name-link">deleteBook</a><wbr>(long&nbsp;id)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Delete a book from the database</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteBorrower(long)" class="member-name-link">deleteBorrower</a><wbr>(long&nbsp;id)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Delete a borrower from the database</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#executeInsertTemplate(java.lang.String,java.lang.String,java.lang.Object...)" class="member-name-link">executeInsertTemplate</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;description,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;preparedStatement,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>...&nbsp;params)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getBorrowerName(long)" class="member-name-link">getBorrowerName</a><wbr>(long&nbsp;id)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Given the id for a borrower, this command returns their name.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isEmpty()" class="member-name-link">isEmpty</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Used to indicate that a persistence layer object is
 using an empty datasource.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#listAllBooks()" class="member-name-link">listAllBooks</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">List all the books in the library</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#listAllBorrowers()" class="member-name-link">listAllBorrowers</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">List all the borrowers registered in the library</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#listAvailableBooks()" class="member-name-link">listAvailableBooks</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">List all the books currently available for borrowing</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#migrateDatabase()" class="member-name-link">migrateDatabase</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Cleans the database and runs the scripts to update it
 to the most current version.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#runBackup(java.lang.String)" class="member-name-link">runBackup</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;backupFileName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Records the current state of the database as a SQL script,
 used later for restoring by something like <a href="IPersistenceLayer.html#runRestore(java.lang.String)"><code>IPersistenceLayer.runRestore(String)</code></a></div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#runRestore(java.lang.String)" class="member-name-link">runRestore</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;backupFileName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Runs a database restore script.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#saveNewBook(java.lang.String)" class="member-name-link">saveNewBook</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bookTitle)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a new book in the database</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#saveNewBorrower(java.lang.String)" class="member-name-link">saveNewBorrower</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;borrowerName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a new borrower in the database</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#saveNewUser(java.lang.String)" class="member-name-link">saveNewUser</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Save a new user to the database</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchBooksById(long)" class="member-name-link">searchBooksById</a><wbr>(long&nbsp;id)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Find a book by its id</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchBooksByTitle(java.lang.String)" class="member-name-link">searchBooksByTitle</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bookTitle)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Find a book by its title</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchBorrowerDataByName(java.lang.String)" class="member-name-link">searchBorrowerDataByName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;borrowerName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Searches for a borrower by name.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchBorrowersById(long)" class="member-name-link">searchBorrowersById</a><wbr>(long&nbsp;id)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Find a borrower by their id</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Loan.html" title="class in com.coveros.training.library.domainobjects">Loan</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchForLoanByBook(com.coveros.training.library.domainobjects.Book)" class="member-name-link">searchForLoanByBook</a><wbr>(<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&nbsp;book)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A book can only be loaned to one person.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Loan.html" title="class in com.coveros.training.library.domainobjects">Loan</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchForLoanByBorrower(com.coveros.training.library.domainobjects.Borrower)" class="member-name-link">searchForLoanByBorrower</a><wbr>(<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&nbsp;borrower)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Search for book loans by borrower

 A borrower may have more than one loan.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../authentication/domainobjects/User.html" title="class in com.coveros.training.authentication.domainobjects">User</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchForUserByName(java.lang.String)" class="member-name-link">searchForUserByName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Search the database for a given borrower by their name</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateBorrower(long,java.lang.String)" class="member-name-link">updateBorrower</a><wbr>(long&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;borrowerName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If we already have a borrower, this command allows us to change
 their values (except for their id)</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateUserWithPassword(long,java.lang.String)" class="member-name-link">updateUserWithPassword</a><wbr>(long&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Change the password for a user.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>PersistenceLayer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">PersistenceLayer</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="executeInsertTemplate(java.lang.String,java.lang.String,java.lang.Object...)">
<h3>executeInsertTemplate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">executeInsertTemplate</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;description,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;preparedStatement,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>...&nbsp;params)</span></div>
</section>
</li>
<li>
<section class="detail" id="saveNewBorrower(java.lang.String)">
<h3>saveNewBorrower</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">saveNewBorrower</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;borrowerName)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#saveNewBorrower(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Creates a new borrower in the database</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#saveNewBorrower(java.lang.String)">saveNewBorrower</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>borrowerName</code> - the name of the borrower</dd>
<dt>Returns:</dt>
<dd>a long id representing its id in the database.  Generated by the database.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createLoan(com.coveros.training.library.domainobjects.Book,com.coveros.training.library.domainobjects.Borrower,java.sql.Date)">
<h3>createLoan</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">createLoan</span><wbr><span class="parameters">(<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&nbsp;book,
 <a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&nbsp;borrower,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Date.html" title="class or interface in java.sql" class="external-link">Date</a>&nbsp;borrowDate)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#createLoan(com.coveros.training.library.domainobjects.Book,com.coveros.training.library.domainobjects.Borrower,java.sql.Date)">IPersistenceLayer</a></code></span></div>
<div class="block">Creates a new loan of a book in the database.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#createLoan(com.coveros.training.library.domainobjects.Book,com.coveros.training.library.domainobjects.Borrower,java.sql.Date)">createLoan</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>book</code> - a book we have to loan out</dd>
<dd><code>borrower</code> - a person who is borrowing the book</dd>
<dd><code>borrowDate</code> - the date this book was borrowed</dd>
<dt>Returns:</dt>
<dd>a long id representing its id in the database.  Generated by the database.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="saveNewBook(java.lang.String)">
<h3>saveNewBook</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">saveNewBook</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bookTitle)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#saveNewBook(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Creates a new book in the database</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#saveNewBook(java.lang.String)">saveNewBook</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>bookTitle</code> - the String title of a book</dd>
<dt>Returns:</dt>
<dd>a long id representing its id in the database.  Generated by the database.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateBorrower(long,java.lang.String)">
<h3>updateBorrower</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateBorrower</span><wbr><span class="parameters">(long&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;borrowerName)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#updateBorrower(long,java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">If we already have a borrower, this command allows us to change
 their values (except for their id)</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#updateBorrower(long,java.lang.String)">updateBorrower</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - the id of a borrower (a constant)</dd>
<dd><code>borrowerName</code> - the name of a borrower, which we can change.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteBook(long)">
<h3>deleteBook</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteBook</span><wbr><span class="parameters">(long&nbsp;id)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#deleteBook(long)">IPersistenceLayer</a></code></span></div>
<div class="block">Delete a book from the database</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#deleteBook(long)">deleteBook</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - the identifier for a book</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteBorrower(long)">
<h3>deleteBorrower</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteBorrower</span><wbr><span class="parameters">(long&nbsp;id)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#deleteBorrower(long)">IPersistenceLayer</a></code></span></div>
<div class="block">Delete a borrower from the database</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#deleteBorrower(long)">deleteBorrower</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - the identifier for a borrower</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBorrowerName(long)">
<h3>getBorrowerName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getBorrowerName</span><wbr><span class="parameters">(long&nbsp;id)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#getBorrowerName(long)">IPersistenceLayer</a></code></span></div>
<div class="block">Given the id for a borrower, this command returns their name.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#getBorrowerName(long)">getBorrowerName</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - a borrower's id.</dd>
<dt>Returns:</dt>
<dd>the borrower's name, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchBorrowerDataByName(java.lang.String)">
<h3>searchBorrowerDataByName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&gt;</span>&nbsp;<span class="element-name">searchBorrowerDataByName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;borrowerName)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#searchBorrowerDataByName(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Searches for a borrower by name.  Returns full details
 if found.  return empty borrower data if not found.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#searchBorrowerDataByName(java.lang.String)">searchBorrowerDataByName</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>borrowerName</code> - the name of a borrower</dd>
<dt>Returns:</dt>
<dd>a valid borrower, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchBooksByTitle(java.lang.String)">
<h3>searchBooksByTitle</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;</span>&nbsp;<span class="element-name">searchBooksByTitle</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;bookTitle)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#searchBooksByTitle(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Find a book by its title</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#searchBooksByTitle(java.lang.String)">searchBooksByTitle</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>bookTitle</code> - the title of a book</dd>
<dt>Returns:</dt>
<dd>a valid book, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchBooksById(long)">
<h3>searchBooksById</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;</span>&nbsp;<span class="element-name">searchBooksById</span><wbr><span class="parameters">(long&nbsp;id)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#searchBooksById(long)">IPersistenceLayer</a></code></span></div>
<div class="block">Find a book by its id</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#searchBooksById(long)">searchBooksById</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - the database id for a book</dd>
<dt>Returns:</dt>
<dd>a valid book, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchBorrowersById(long)">
<h3>searchBorrowersById</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&gt;</span>&nbsp;<span class="element-name">searchBorrowersById</span><wbr><span class="parameters">(long&nbsp;id)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#searchBorrowersById(long)">IPersistenceLayer</a></code></span></div>
<div class="block">Find a borrower by their id</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#searchBorrowersById(long)">searchBorrowersById</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - the database id of a borrower</dd>
<dt>Returns:</dt>
<dd>a borrower, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAllBooks()">
<h3>listAllBooks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;&gt;</span>&nbsp;<span class="element-name">listAllBooks</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#listAllBooks()">IPersistenceLayer</a></code></span></div>
<div class="block">List all the books in the library</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#listAllBooks()">listAllBooks</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Returns:</dt>
<dd>all the books, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAvailableBooks()">
<h3>listAvailableBooks</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&gt;&gt;</span>&nbsp;<span class="element-name">listAvailableBooks</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#listAvailableBooks()">IPersistenceLayer</a></code></span></div>
<div class="block">List all the books currently available for borrowing</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#listAvailableBooks()">listAvailableBooks</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Returns:</dt>
<dd>all the available books, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listAllBorrowers()">
<h3>listAllBorrowers</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&gt;&gt;</span>&nbsp;<span class="element-name">listAllBorrowers</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#listAllBorrowers()">IPersistenceLayer</a></code></span></div>
<div class="block">List all the borrowers registered in the library</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#listAllBorrowers()">listAllBorrowers</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Returns:</dt>
<dd>a list of all the borrowers, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchForLoanByBorrower(com.coveros.training.library.domainobjects.Borrower)">
<h3>searchForLoanByBorrower</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../library/domainobjects/Loan.html" title="class in com.coveros.training.library.domainobjects">Loan</a>&gt;&gt;</span>&nbsp;<span class="element-name">searchForLoanByBorrower</span><wbr><span class="parameters">(<a href="../library/domainobjects/Borrower.html" title="class in com.coveros.training.library.domainobjects">Borrower</a>&nbsp;borrower)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#searchForLoanByBorrower(com.coveros.training.library.domainobjects.Borrower)">IPersistenceLayer</a></code></span></div>
<div class="block">Search for book loans by borrower

 A borrower may have more than one loan.  But a book
 can only be loaned to one borrower.  That is why when we
 search for loans by borrower, we may get multiple loans
 back, but when we search by book, we only get one back.
 A book cannot be loaned to two people at the same time!</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#searchForLoanByBorrower(com.coveros.training.library.domainobjects.Borrower)">searchForLoanByBorrower</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>borrower</code> - a given borrower registered with the library</dd>
<dt>Returns:</dt>
<dd>a list of loans, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchForLoanByBook(com.coveros.training.library.domainobjects.Book)">
<h3>searchForLoanByBook</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../library/domainobjects/Loan.html" title="class in com.coveros.training.library.domainobjects">Loan</a>&gt;</span>&nbsp;<span class="element-name">searchForLoanByBook</span><wbr><span class="parameters">(<a href="../library/domainobjects/Book.html" title="class in com.coveros.training.library.domainobjects">Book</a>&nbsp;book)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#searchForLoanByBook(com.coveros.training.library.domainobjects.Book)">IPersistenceLayer</a></code></span></div>
<div class="block">A book can only be loaned to one person.  Find that loan</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#searchForLoanByBook(com.coveros.training.library.domainobjects.Book)">searchForLoanByBook</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>book</code> - the book used to search for the loan</dd>
<dt>Returns:</dt>
<dd>a loan, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="saveNewUser(java.lang.String)">
<h3>saveNewUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">saveNewUser</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#saveNewUser(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Save a new user to the database</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#saveNewUser(java.lang.String)">saveNewUser</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>username</code> - a String name of a user</dd>
<dt>Returns:</dt>
<dd>a long id representing its id in the database.  Generated by the database.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchForUserByName(java.lang.String)">
<h3>searchForUserByName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="../authentication/domainobjects/User.html" title="class in com.coveros.training.authentication.domainobjects">User</a>&gt;</span>&nbsp;<span class="element-name">searchForUserByName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#searchForUserByName(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Search the database for a given borrower by their name</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#searchForUserByName(java.lang.String)">searchForUserByName</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>username</code> - a borrower's name</dd>
<dt>Returns:</dt>
<dd>a user, or empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="areCredentialsValid(java.lang.String,java.lang.String)">
<h3>areCredentialsValid</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="class or interface in java.util" class="external-link">Optional</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&gt;</span>&nbsp;<span class="element-name">areCredentialsValid</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;username,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#areCredentialsValid(java.lang.String,java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Check whether the credentials are valid</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#areCredentialsValid(java.lang.String,java.lang.String)">areCredentialsValid</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>username</code> - a user's chosen username</dd>
<dd><code>password</code> - a user's chosen password</dd>
<dt>Returns:</dt>
<dd>true if the credentials match something we have, empty otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateUserWithPassword(long,java.lang.String)">
<h3>updateUserWithPassword</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateUserWithPassword</span><wbr><span class="parameters">(long&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;password)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#updateUserWithPassword(long,java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Change the password for a user.

 We store the user's hash, not their password.  This method
 first hashes the password, then stores that.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#updateUserWithPassword(long,java.lang.String)">updateUserWithPassword</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - the database id for a given user</dd>
<dd><code>password</code> - the new password, which we'll hash first before storing</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createEmpty()">
<h3>createEmpty</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></span>&nbsp;<span class="element-name">createEmpty</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEmpty</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#isEmpty()">IPersistenceLayer</a></code></span></div>
<div class="block">Used to indicate that a persistence layer object is
 using an empty datasource.  See <code>EmptyDataSource</code></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#isEmpty()">isEmpty</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Returns:</dt>
<dd>true if the object is "empty"</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runBackup(java.lang.String)">
<h3>runBackup</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">runBackup</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;backupFileName)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#runBackup(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Records the current state of the database as a SQL script,
 used later for restoring by something like <a href="IPersistenceLayer.html#runRestore(java.lang.String)"><code>IPersistenceLayer.runRestore(String)</code></a></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#runBackup(java.lang.String)">runBackup</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>backupFileName</code> - the path to the sql script, based in the project home directory.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="runRestore(java.lang.String)">
<h3>runRestore</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">runRestore</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;backupFileName)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#runRestore(java.lang.String)">IPersistenceLayer</a></code></span></div>
<div class="block">Runs a database restore script.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#runRestore(java.lang.String)">runRestore</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
<dt>Parameters:</dt>
<dd><code>backupFileName</code> - the path to the sql script, based in the project home directory.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cleanAndMigrateDatabase()">
<h3>cleanAndMigrateDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">cleanAndMigrateDatabase</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#cleanAndMigrateDatabase()">IPersistenceLayer</a></code></span></div>
<div class="block">Cleans the database and runs the scripts to update it
 to the most current version.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#cleanAndMigrateDatabase()">cleanAndMigrateDatabase</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cleanDatabase()">
<h3>cleanDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">cleanDatabase</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#cleanDatabase()">IPersistenceLayer</a></code></span></div>
<div class="block">Cleans the database and runs the scripts to update it
 to the most current version.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#cleanDatabase()">cleanDatabase</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="migrateDatabase()">
<h3>migrateDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">migrateDatabase</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="IPersistenceLayer.html#migrateDatabase()">IPersistenceLayer</a></code></span></div>
<div class="block">Cleans the database and runs the scripts to update it
 to the most current version.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="IPersistenceLayer.html#migrateDatabase()">migrateDatabase</a></code>&nbsp;in interface&nbsp;<code><a href="IPersistenceLayer.html" title="interface in com.coveros.training.persistence">IPersistenceLayer</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
